{"ast":null,"code":"import _asyncToGenerator from\"/Users/jonathanguerrero/Documents/Programming/GitHub/portfolio/react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jonathanguerrero/Documents/Programming/GitHub/portfolio/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jonathanguerrero/Documents/Programming/GitHub/portfolio/react-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import classes from\"./Payment.module.css\";import{CardElement,useElements,useStripe}from\"@stripe/react-stripe-js\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CARD_OPTIONS={iconStyle:\"solid\",style:{base:{iconColor:\"#c4f0ff\",color:\"#fff\",fontWeight:500,fontFamily:\"Roboto, Open Sans, Segoe UI, sans-serif\",fontSize:\"16px\",fontSmoothing:\"antialiased\",\":-webkitautofill\":{color:\"#fce883\"},\"::placeholder\":{color:\"#87bbfd\"}},invalid:{iconColor:\"#ffc7ee\",color:\"#ffc7ee\"}}};var PaymentForm=function PaymentForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var stripe=useStripe();var elements=useElements();var message=/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"You just bought a sweet spatula ! Congrats!\"})});var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$stripe$createP,error,paymentMethod,id,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return stripe.createPaymentMethod({type:\"card\",card:elements.getElement(CardElement)});case 3:_yield$stripe$createP=_context.sent;error=_yield$stripe$createP.error;paymentMethod=_yield$stripe$createP.paymentMethod;if(error){_context.next=20;break;}_context.prev=7;id=paymentMethod.id;_context.next=11;return axios.post(\"https://localhost:4000/payment\",{amount:1000,id:id});case 11:response=_context.sent;if(response.data.success){console.log(\"Successful payment\");setSuccess(true);}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);console.log(\"Error\",_context.t0);case 18:_context.next=21;break;case 20:console.log(error.message);case 21:case\"end\":return _context.stop();}}},_callee,null,[[7,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var form=/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"fieldset\",{className:classes.FormGroup,children:/*#__PURE__*/_jsx(\"div\",{className:classes.FormRow,children:/*#__PURE__*/_jsx(CardElement,{options:CARD_OPTIONS})})}),/*#__PURE__*/_jsx(\"button\",{className:classes.button,children:\"Pay\"})]});return/*#__PURE__*/_jsx(\"div\",{children:!success?form:message});};export default PaymentForm;","map":{"version":3,"sources":["/Users/jonathanguerrero/Documents/Programming/GitHub/portfolio/react-app/src/components/Payment/PaymentForm.js"],"names":["React","useState","classes","CardElement","useElements","useStripe","axios","CARD_OPTIONS","iconStyle","style","base","iconColor","color","fontWeight","fontFamily","fontSize","fontSmoothing","invalid","PaymentForm","success","setSuccess","stripe","elements","message","handleSubmit","e","preventDefault","createPaymentMethod","type","card","getElement","error","paymentMethod","id","post","amount","response","data","console","log","form","FormGroup","FormRow","button"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,OAASC,WAAT,CAAsBC,WAAtB,CAAmCC,SAAnC,KAAoD,yBAApD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,SAAS,CAAE,OADQ,CAEnBC,KAAK,CAAE,CACLC,IAAI,CAAE,CACJC,SAAS,CAAE,SADP,CAEJC,KAAK,CAAE,MAFH,CAGJC,UAAU,CAAE,GAHR,CAIJC,UAAU,CAAE,yCAJR,CAKJC,QAAQ,CAAE,MALN,CAMJC,aAAa,CAAE,aANX,CAOJ,mBAAoB,CAAEJ,KAAK,CAAE,SAAT,CAPhB,CAQJ,gBAAiB,CAAEA,KAAK,CAAE,SAAT,CARb,CADD,CAWLK,OAAO,CAAE,CACPN,SAAS,CAAE,SADJ,CAEPC,KAAK,CAAE,SAFA,CAXJ,CAFY,CAArB,CAoBA,GAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,cAA8BjB,QAAQ,CAAC,KAAD,CAAtC,wCAAOkB,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,MAAM,CAAGhB,SAAS,EAAxB,CACA,GAAMiB,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CACA,GAAMmB,CAAAA,OAAO,cACX,kCACE,mEADF,EADF,CAMA,GAAMC,CAAAA,YAAY,0FAAG,iBAAOC,CAAP,4KACnBA,CAAC,CAACC,cAAF,GADmB,sBAEoBL,CAAAA,MAAM,CAACM,mBAAP,CAA2B,CAChEC,IAAI,CAAE,MAD0D,CAEhEC,IAAI,CAAEP,QAAQ,CAACQ,UAAT,CAAoB3B,WAApB,CAF0D,CAA3B,CAFpB,4CAEX4B,KAFW,uBAEXA,KAFW,CAEJC,aAFI,uBAEJA,aAFI,IAOdD,KAPc,0CASPE,EATO,CASAD,aATA,CASPC,EATO,wBAUQ3B,CAAAA,KAAK,CAAC4B,IAAN,CAAW,gCAAX,CAA6C,CAClEC,MAAM,CAAE,IAD0D,CAElEF,EAAE,CAAFA,EAFkE,CAA7C,CAVR,SAUTG,QAVS,eAef,GAAIA,QAAQ,CAACC,IAAT,CAAclB,OAAlB,CAA2B,CACzBmB,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACAnB,UAAU,CAAC,IAAD,CAAV,CACD,CAlBc,iFAoBfkB,OAAO,CAACC,GAAR,CAAY,OAAZ,cApBe,uCAuBjBD,OAAO,CAACC,GAAR,CAAYR,KAAK,CAACR,OAAlB,EAvBiB,qEAAH,kBAAZC,CAAAA,YAAY,4CAAlB,CA2BA,GAAMgB,CAAAA,IAAI,cACR,cAAM,QAAQ,CAAEhB,YAAhB,wBACE,iBAAU,SAAS,CAAEtB,OAAO,CAACuC,SAA7B,uBACE,YAAK,SAAS,CAAEvC,OAAO,CAACwC,OAAxB,uBACE,KAAC,WAAD,EAAa,OAAO,CAAEnC,YAAtB,EADF,EADF,EADF,cAME,eAAQ,SAAS,CAAEL,OAAO,CAACyC,MAA3B,iBANF,GADF,CAWA,mBAAO,qBAAM,CAACxB,OAAD,CAAWqB,IAAX,CAAkBjB,OAAxB,EAAP,CACD,CAjDD,CAmDA,cAAeL,CAAAA,WAAf","sourcesContent":["import React, { useState } from \"react\";\nimport classes from \"./Payment.module.css\";\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\n\nconst CARD_OPTIONS = {\n  iconStyle: \"solid\",\n  style: {\n    base: {\n      iconColor: \"#c4f0ff\",\n      color: \"#fff\",\n      fontWeight: 500,\n      fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n      fontSize: \"16px\",\n      fontSmoothing: \"antialiased\",\n      \":-webkitautofill\": { color: \"#fce883\" },\n      \"::placeholder\": { color: \"#87bbfd\" },\n    },\n    invalid: {\n      iconColor: \"#ffc7ee\",\n      color: \"#ffc7ee\",\n    },\n  },\n};\n\nconst PaymentForm = () => {\n  const [success, setSuccess] = useState(false);\n  const stripe = useStripe();\n  const elements = useElements();\n  const message = (\n    <div>\n      <h2>You just bought a sweet spatula ! Congrats!</h2>\n    </div>\n  );\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const { error, paymentMethod } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement),\n    });\n\n    if (!error) {\n      try {\n        const { id } = paymentMethod;\n        const response = await axios.post(\"https://localhost:4000/payment\", {\n          amount: 1000,\n          id,\n        });\n\n        if (response.data.success) {\n          console.log(\"Successful payment\");\n          setSuccess(true);\n        }\n      } catch (error) {\n        console.log(\"Error\", error);\n      }\n    } else {\n      console.log(error.message);\n    }\n  };\n\n  const form = (\n    <form onSubmit={handleSubmit}>\n      <fieldset className={classes.FormGroup}>\n        <div className={classes.FormRow}>\n          <CardElement options={CARD_OPTIONS}></CardElement>\n        </div>\n      </fieldset>\n      <button className={classes.button}>Pay</button>\n    </form>\n  );\n\n  return <div>{!success ? form : message}</div>;\n};\n\nexport default PaymentForm;\n"]},"metadata":{},"sourceType":"module"}